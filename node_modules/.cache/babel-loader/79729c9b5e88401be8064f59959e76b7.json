{"remainingRequest":"/Users/katagibova/Desktop/test-task-malltech/node_modules/babel-loader/lib/index.js!/Users/katagibova/Desktop/test-task-malltech/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/katagibova/Desktop/test-task-malltech/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/katagibova/Desktop/test-task-malltech/src/views/MainScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/katagibova/Desktop/test-task-malltech/src/views/MainScreen.vue","mtime":1685051646840},{"path":"/Users/katagibova/Desktop/test-task-malltech/babel.config.js","mtime":1676813917908},{"path":"/Users/katagibova/Desktop/test-task-malltech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/katagibova/Desktop/test-task-malltech/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/katagibova/Desktop/test-task-malltech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/katagibova/Desktop/test-task-malltech/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYXBpIH0gZnJvbSAiQC9zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNYWluU2NyZWVuJywKICBjb21wb25lbnRzOiB7fSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlb3BsZTogW10sCiAgICAgIHBhZ2luYXRpb25MZW5ndGg6IDAsCiAgICAgIHBhZ2U6IDEsCiAgICAgIGNyZWF0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgZWRpdGlvbkRpYWxvZzogZmFsc2UsCiAgICAgIG5ld05hbWU6ICcnLAogICAgICBuZXdTdXJuYW1lOiAnJywKICAgICAgbmV3QmlydGhEYXRlOiAnJywKICAgICAgc2VsZWN0ZWRJdGVtOiB7fSwKICAgICAgc25hY2tiYXI6IGZhbHNlLAogICAgICBzbmFja2JhclRleHQ6ICcnLAogICAgICBzbmFja2JhckNvbG9yOiAnJywKICAgICAgdmFsaWRDcmVhdGlvbkZvcm06IGZhbHNlLAogICAgICB2YWxpZEVkaXRpb25Gb3JtOiBmYWxzZSwKICAgICAgc3VybmFtZVJ1bGVzOiBbdiA9PiAhIXYgfHwgJ9Ce0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtSddLAogICAgICBiaXJ0aERhdGVSdWxlczogW3YgPT4gISF2IHx8ICfQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LUnLCB2ID0+IC9bMC0zXVswLTldXC5bMDFdWzAtOV1cLlsxMl1bMC05XVswLTldWzAtOV0vLnRlc3QodikgfHwgJ9Cd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDRgtGLJ10KICAgIH07CiAgfSwKCiAgd2F0Y2g6IHt9LAoKICBtb3VudGVkKCkge30sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEl0ZW1zKCk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHBhZ2luYXRlZERhdGEoKSB7CiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5wYWdlICogMyAtIDMsCiAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgMzsKICAgICAgcmV0dXJuIHRoaXMucGVvcGxlLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEl0ZW1zKCkgewogICAgICBhcGkuZ2V0QWxsUGVvcGxlKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5wZW9wbGUgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMucGFnaW5hdGlvbkxlbmd0aCA9IE1hdGguY2VpbChyZXNwb25zZS5kYXRhLmxlbmd0aCAvIDMpOwogICAgICB9KTsKICAgIH0sCgogICAgY3JlYXRlSXRlbSgpIHsKICAgICAgaWYgKHRoaXMudmFsaWRDcmVhdGlvbkZvcm0pIHsKICAgICAgICBjb25zdCBuZXdJdGVtID0gewogICAgICAgICAgbmFtZTogdGhpcy5uZXdOYW1lLAogICAgICAgICAgc3VybmFtZTogdGhpcy5uZXdTdXJuYW1lLAogICAgICAgICAgYmlydGhEYXRlOiB0aGlzLm5ld0JpcnRoRGF0ZQogICAgICAgIH07CiAgICAgICAgYXBpLmNyZWF0ZU5ld0l0ZW0obmV3SXRlbSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9ICfQl9Cw0L/QuNGB0Ywg0YHQvtC30LTQsNC90LAg0YPRgdC/0LXRiNC90L4nOwogICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ2dyZWVuIGRhcmtlbi0xJzsKICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlOwogICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgdGhpcy5nZXRJdGVtcygpOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnOwogICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ3JlZCBkYXJrZW4tMSc7CiAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLmNyZWF0aW9uRm9ybS52YWxpZGF0ZSgpOwogICAgICB9CiAgICB9LAoKICAgIGVkaXRJdGVtKCkgewogICAgICBpZiAodGhpcy52YWxpZEVkaXRpb25Gb3JtKSB7CiAgICAgICAgYXBpLmVkaXRJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9CX0LDQv9C40YHRjCDQuNC30LzQtdC90LXQvdCwINGD0YHQv9C10YjQvdC+JzsKICAgICAgICAgIHRoaXMuc25hY2tiYXJDb2xvciA9ICdncmVlbiBkYXJrZW4tMSc7CiAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZWRpdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5nZXRJdGVtcygpOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnOwogICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ3JlZCBkYXJrZW4tMSc7CiAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZWRpdGlvbkRpYWxvZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuZWRpcmlvbkZvcm0udmFsaWRhdGUoKTsKICAgICAgfQogICAgfSwKCiAgICBkZWxldGVJdGVtKGlkKSB7CiAgICAgIGFwaS5kZWxldGVJdGVtKGlkKS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9ICfQl9Cw0L/QuNGB0Ywg0YPQtNCw0LvQtdC90LAg0YPRgdC/0LXRiNC90L4nOwogICAgICAgIHRoaXMuc25hY2tiYXJDb2xvciA9ICdncmVlbiBkYXJrZW4tMSc7CiAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRJdGVtcygpOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5zbmFja2JhclRleHQgPSAn0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCc7CiAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ3JlZCBkYXJrZW4tMSc7CiAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKCiAgICBvcGVuRWRpdERpYWxvZyhpZCkgewogICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IHsgLi4udGhpcy5wZW9wbGUuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpCiAgICAgIH07CiAgICAgIHRoaXMuZWRpdGlvbkRpYWxvZyA9IHRydWU7CiAgICB9LAoKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLm5ld05hbWUgPSAnJzsKICAgICAgdGhpcy5uZXdTdXJuYW1lID0gJyc7CiAgICAgIHRoaXMubmV3QmlydGhEYXRlID0gJyc7CiAgICAgIHRoaXMuY3JlYXRpb25EaWFsb2cgPSBmYWxzZTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA0LA;AAEA;EACAA,kBADA;EAEAC,cAFA;;EAIAC;IACA;MACAC,UADA;MAEAC,mBAFA;MAGAC,OAHA;MAIAC,qBAJA;MAKAC,oBALA;MAMAC,WANA;MAOAC,cAPA;MAQAC,gBARA;MASAC,gBATA;MAUAC,eAVA;MAWAC,gBAXA;MAYAC,iBAZA;MAaAC,wBAbA;MAcAC,uBAdA;MAeAC,eACAC,+BADA,CAfA;MAkBAC,iBACAD,+BADA,EAEAA,mFAFA;IAlBA;EAuBA,CA5BA;;EA6BAE,SA7BA;;EA8BAC,YA9BA;;EA+BAC;IACA;EACA,CAjCA;;EAkCAC;IACAC;MACA;MAAA,MACAC,eADA;MAEA;IACA;;EALA,CAlCA;EAyCAC;IACAC;MACAC;QACA;QACA;MACA,CAHA;IAIA,CANA;;IAOAC;MACA;QACA;UACA7B,kBADA;UAEA8B,wBAFA;UAGAC;QAHA;QAMAH,2BACAI,IADA,CACA;UACA;UACA;UACA;UACA;UACA;QACA,CAPA,EAQAC,KARA,CAQA;UACA;UACA;UACA;UACA;QACA,CAbA;MAcA,CArBA,MAqBA;QACA;MACA;IACA,CAhCA;;IAiCAC;MACA;QACAN,gCACAI,IADA,CACA;UACA;UACA;UACA;UACA;UACA;QACA,CAPA,EAQAC,KARA,CAQA;UACA;UACA;UACA;UACA;QACA,CAbA;MAcA,CAfA,MAeA;QACA;MACA;IACA,CApDA;;IAqDAE;MACAP,mBACAI,IADA,CACA;QACA;QACA;QACA;QACA;MACA,CANA,EAOAC,KAPA,CAOA;QACA;QACA;QACA;MACA,CAXA;IAYA,CAlEA;;IAmEAG;MACA;MAAA;MACA;IACA,CAtEA;;IAuEAC;MACA;MACA;MACA;MACA;IACA;;EA5EA;AAzCA","names":["name","components","data","people","paginationLength","page","creationDialog","editionDialog","newName","newSurname","newBirthDate","selectedItem","snackbar","snackbarText","snackbarColor","validCreationForm","validEditionForm","surnameRules","v","birthDateRules","watch","mounted","created","computed","paginatedData","end","methods","getItems","api","createItem","surname","birthDate","then","catch","editItem","deleteItem","openEditDialog","closeDialog"],"sourceRoot":"src/views","sources":["MainScreen.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col cols=\"2\">\n        <v-btn \n        color=\"primary\" \n        elevation=\"0\"\n        @click=\"creationDialog = true\">\n          Создать\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-simple-table>\n          <template v-slot:default>\n          <thead>\n            <tr>\n              <th class=\"text-center\">\n                Имя\n              </th>\n              <th class=\"text-center\">\n                Фамилия\n              </th>\n              <th class=\"text-center\">\n                Дата рождения\n              </th>\n              <th class=\"text-center\">\n                Действия\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n            v-for=\"item in paginatedData\"\n            :key=\"item.id\"\n            >\n            <td class=\"text-center\">{{ item.name }}</td>\n            <td class=\"text-center\">{{ item.surname }}</td>\n            <td class=\"text-center\">{{ item.birthDate }}</td>\n            <td class=\"text-center\">\n              <v-btn icon @click=\"openEditDialog(item.id)\">\n                <v-icon> mdi-pencil </v-icon>\n              </v-btn>\n              <v-btn icon color=\"red\" @click=\"deleteItem(item.id)\">\n                <v-icon> mdi-delete </v-icon>\n              </v-btn>\n            </td>\n            </tr>\n          </tbody>\n          </template>\n        </v-simple-table>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-spacer></v-spacer>\n      <v-col>\n        <v-pagination\n          v-model=\"page\"\n          :length=\"paginationLength\"\n          circle\n        ></v-pagination>\n      </v-col>\n      <v-spacer></v-spacer>\n    </v-row>\n    <v-dialog\n    v-model=\"creationDialog\"\n    max-width=\"600\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          Добавить запись\n        </v-card-title>\n\n        <v-form v-model=\"validCreationForm\" ref=\"creationForm\">\n          <v-card-text>\n            <v-text-field\n            v-model=\"newName\"\n            label=\"Имя\"\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"newSurname\"\n            label=\"Фамилия\"\n            :rules=\"surnameRules\"\n            required\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"newBirthDate\"\n            label=\"Дата рождения\"\n            :rules=\"birthDateRules\"\n            required\n            ></v-text-field>\n          </v-card-text>\n\n          <v-card-actions>\n            <v-btn\n              color=\"red darken-1\"\n              text\n              @click=\"closeDialog\"\n            >\n              Отмена\n            </v-btn>\n\n            <v-spacer></v-spacer>\n\n            <v-btn\n              color=\"green darken-1\"\n              text\n              @click=\"createItem\"\n            >\n              Добавить\n            </v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog\n    v-model=\"editionDialog\"\n    max-width=\"600\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          Изменить запись\n        </v-card-title>\n\n        <v-form v-model=\"validEditionForm\" ref=\"edirionForm\">\n          <v-card-text>\n            <v-text-field\n            v-model=\"selectedItem.name\"\n            label=\"Имя\"\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"selectedItem.surname\"\n            label=\"Фамилия\"\n            :rules=\"surnameRules\"\n            required\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"selectedItem.birthDate\"\n            label=\"Дата рождения\"\n            :rules=\"birthDateRules\"\n            required\n            ></v-text-field>\n          </v-card-text>\n\n          <v-card-actions>\n            <v-btn\n              color=\"red darken-1\"\n              text\n              @click=\"editionDialog = false\"\n            >\n              Отмена\n            </v-btn>\n\n            <v-spacer></v-spacer>\n\n            <v-btn\n              color=\"green darken-1\"\n              text\n              @click=\"editItem\"\n            >\n              Сохранить\n            </v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-dialog>\n    \n    <v-snackbar\n    v-model=\"snackbar\"\n    :timeout=\"2000\"\n    :color=\"snackbarColor\"\n    top\n    right\n    >\n      {{ snackbarText }}\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { api } from \"@/service\"\n\nexport default {\n  name: 'MainScreen',\n  components: {\n  },\n  data(){\n    return {\n      people: [],\n      paginationLength: 0,\n      page: 1,\n      creationDialog: false,\n      editionDialog: false,\n      newName: '',\n      newSurname: '',\n      newBirthDate: '',\n      selectedItem: {},\n      snackbar: false,\n      snackbarText: '',\n      snackbarColor: '',\n      validCreationForm: false,\n      validEditionForm: false,\n      surnameRules: [\n        v => !!v || 'Обязательное поле'\n      ],\n      birthDateRules: [\n        v => !!v || 'Обязательное поле',\n        v => /[0-3][0-9]\\.[01][0-9]\\.[12][0-9][0-9][0-9]/.test(v) || 'Неверный формат даты',\n      ],\n    }\n  },\n  watch: {},\n  mounted() {},\n  created(){\n    this.getItems()\n  },\n  computed: {\n    paginatedData(){\n      const start = this.page * 3 - 3,\n            end = start + 3\n      return this.people.slice(start, end)\n    }\n  },\n  methods: {\n    getItems(){\n      api.getAllPeople().then((response) => {\n        this.people = response.data\n        this.paginationLength = Math.ceil(response.data.length / 3)\n      })\n    },\n    createItem() {\n      if(this.validCreationForm) {\n        const newItem = {\n          name: this.newName,\n          surname: this.newSurname,\n          birthDate: this.newBirthDate\n        }\n\n        api.createNewItem(newItem)\n          .then( () => {\n            this.snackbarText = 'Запись создана успешно'\n            this.snackbarColor = 'green darken-1'\n            this.snackbar = true\n            this.closeDialog()\n            this.getItems()\n          })\n          .catch(() => {\n            this.snackbarText = 'Произошла ошибка'\n            this.snackbarColor = 'red darken-1'\n            this.snackbar = true\n            this.closeDialog()\n          })\n      } else {\n        this.$refs.creationForm.validate()\n      }\n    },\n    editItem() {\n      if(this.validEditionForm){\n        api.editItem(this.selectedItem)\n          .then( () => {\n            this.snackbarText = 'Запись изменена успешно'\n            this.snackbarColor = 'green darken-1'\n            this.snackbar = true\n            this.editionDialog = false\n            this.getItems()\n          })\n          .catch(() => {\n            this.snackbarText = 'Произошла ошибка'\n            this.snackbarColor = 'red darken-1'\n            this.snackbar = true\n            this.editionDialog = false\n          })\n      } else {\n        this.$refs.edirionForm.validate()\n      }\n    },\n    deleteItem(id) {\n      api.deleteItem(id)\n        .then( () => {\n          this.snackbarText = 'Запись удалена успешно'\n          this.snackbarColor = 'green darken-1'\n          this.snackbar = true\n          this.getItems()\n        })\n        .catch(() => {\n          this.snackbarText = 'Произошла ошибка'\n          this.snackbarColor = 'red darken-1'\n          this.snackbar = true\n        })\n    },\n    openEditDialog(id) {\n      this.selectedItem = {...this.people.find(el => el.id === id)}\n      this.editionDialog = true\n    },\n    closeDialog(){\n      this.newName = ''\n      this.newSurname = ''\n      this.newBirthDate = ''\n      this.creationDialog = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n"]}]}