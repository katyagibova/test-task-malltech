{"remainingRequest":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/katagibova/Desktop/Работа/Yeltsin-Project/src/components/AppUnit/AppVideoCarousel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/src/components/AppUnit/AppVideoCarousel.vue","mtime":1679244105114},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/cache-loader/dist/cjs.js","mtime":1676814008015},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/babel-loader/lib/index.js","mtime":1676814008140},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/cache-loader/dist/cjs.js","mtime":1676814008015},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/vue-loader/lib/index.js","mtime":1676814005919}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcFZpZGVvQ2Fyb3VzZWwnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICBpdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZTogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBjdXJlbnRTbGlkZTogMCwKICAgICAgc2hvd0NvbnRyb2xzOiBmYWxzZSwKICAgICAgc2hvd0luZm86IGZhbHNlLAogICAgICBzaG93SW5mb0J0bjogdHJ1ZSwKICAgICAgc2hvd1BsYXlCdG46IHRydWUsCiAgICAgIHRpbWVySWQ6IG51bGwsCiAgICAgIHNob3dWaWRlb0RpYWxvZzogZmFsc2UsCiAgICAgIHZpZGVvVXJsOiAnJywKICAgICAgdG91Y2g6IHsKICAgICAgICBzdGFydFg6IDAsCiAgICAgICAgZW5kWDogMAogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDp7fSwKICBjcmVhdGVkKCl7fSwKICBtb3VudGVkKCl7CiAgICB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZXZlbnQgPT4gdGhpcy50b3VjaHN0YXJ0KGV2ZW50KSkKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGV2ZW50ID0+IHRoaXMudG91Y2htb3ZlKGV2ZW50KSkKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKCkgPT4gdGhpcy50b3VjaGVuZCgpKQogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldEN1cmVudFNsaWRlKGkpewogICAgICB0aGlzLmN1cmVudFNsaWRlID0gaQogICAgfSwKICAgIHByZXYoKXsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cmVudFNsaWRlID4gMCA/IHRoaXMuY3VyZW50U2xpZGUgLSAxIDogdGhpcy5pdGVtcy5sZW5ndGggLSAxCiAgICAgIHRoaXMuc2V0Q3VyZW50U2xpZGUoaW5kZXgpCiAgICB9LAogICAgbmV4dCgpewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VyZW50U2xpZGUgPCB0aGlzLml0ZW1zLmxlbmd0aCAtIDEgPyB0aGlzLmN1cmVudFNsaWRlICsgMSA6IDAKICAgICAgdGhpcy5zZXRDdXJlbnRTbGlkZShpbmRleCkKICAgIH0sCiAgICBzaG93VmlkZW9JbmZvKCkgewogICAgICB0aGlzLnNob3dJbmZvID0gIXRoaXMuc2hvd0luZm8KICAgICAgdGhpcy5zaG93SW5mb0J0biA9ICF0aGlzLnNob3dJbmZvQnRuCiAgICB9LAogICAgdmlkZW9QbGF5KCkgewogICAgICB0aGlzLnNob3dWaWRlb0RpYWxvZyA9IHRydWUKICAgICAgdGhpcy52aWRlb1VybCA9IHRoaXMuaXRlbXNbdGhpcy5jdXJlbnRTbGlkZV0udXJsCgogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCB2aWRlb0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbM10KCiAgICAgICAgY29uc3QgdmlkZW9EdXJhdGlvbiA9IHZpZGVvRWwuZHVyYXRpb24KICAgICAgICB0aGlzLnRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICBsZXQgY3VycmVudFRpbWUgPSB2aWRlb0VsLmN1cnJlbnRUaW1lCiAgICAgICAgICBpZihjdXJyZW50VGltZSA9PSB2aWRlb0R1cmF0aW9uKSB7CiAgICAgICAgICAgIHRoaXMudmlkZW9DbG9zZSgpCiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcklkKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICB9LCAxMCkKICAgICAgfSwgMTAwMCkKICAgICAgdGhpcy5zaG93SW5mbyA9IGZhbHNlCiAgICAgIHRoaXMuc2hvd0NvbnRyb2xzID0gdHJ1ZQogICAgfSwKICAgIHZpZGVvQ2xvc2UoKXsKICAgICAgY29uc3QgdmlkZW9FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzNdCiAgICAgIHZpZGVvRWwucGF1c2UoKQogICAgICB0aGlzLnNob3dWaWRlb0RpYWxvZyA9IGZhbHNlCiAgICB9LAogICAgdG91Y2hzdGFydChldmVudCl7CiAgICAgIHRoaXMudG91Y2guc3RhcnRYID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYCiAgICAgIHRoaXMudG91Y2guZW5kWCA9IDAKICAgIH0sCiAgICB0b3VjaG1vdmUoZXZlbnQpewogICAgICB0aGlzLnRvdWNoLmVuZFggPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFgKICAgIH0sCiAgICB0b3VjaGVuZCgpewogICAgICBpZighdGhpcy50b3VjaC5lbmRYIHx8IE1hdGguYWJzKHRoaXMudG91Y2guZW5kWCAtIHRoaXMudG91Y2guc3RhcnRYKSA8IDIwKXsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBpZih0aGlzLnRvdWNoLmVuZFggPCB0aGlzLnRvdWNoLnN0YXJ0WCkgewogICAgICAgIHRoaXMubmV4dCgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcmV2KCkgCiAgICAgIH0KICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["AppVideoCarousel.vue"],"names":[],"mappings":";;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppVideoCarousel.vue","sourceRoot":"src/components/AppUnit","sourcesContent":["<template>\n<div class=\"video_wrapper\">\n    <div class=\"left_arrow\" @click=\"prev\" v-if=\"curentSlide !== 0\">\n      <img src=\"../../assets/icons/left-arrow.svg\" alt=\"\">\n    </div>\n    <div class=\"empty_block\" v-else></div>\n    <div>\n      <div class=\"carousel_wrapper\">\n        <div class=\"carousel\" :style=\"{'margin-left': '-' + (100 * curentSlide) + '%'}\">\n            <div\n            class=\"videoplayer\"\n            v-for=\"(item, i) in items\" \n            :key=\"i\">\n              <video disablepictureinpicture playsinline  width=\"800\" height=\"410\" :poster=\"require('../../assets/books_posters/' + item.poster)\" :controls=\"false\" controlsList=\"nodownload\">\n                <source :src=\"require('../../assets/video/' + item.url)\" type=\"video/mp4\">\n              </video>\n              <div class=\"button_play\" @click=\"videoPlay\" v-if=\"showPlayBtn\">\n                <img src=\"../../assets/icons/button_play.png\" alt=\"\">\n              </div>\n              <div class=\"button_info\" v-if=\"showInfoBtn\" @click=\"showVideoInfo\">\n                <img src=\"../../assets/icons/button_info.png\" alt=\"\">\n              </div>\n              <div class=\"hover_info\" v-if=\"showInfo\">\n                <div>\n                  <p class=\"hover_info_title\">{{item.hover_title}}</p>\n                  <p class=\"hover_info_subtitle\">{{item.hover_subtitle}}</p>\n                </div>\n                <div style=\"cursor: pointer\" @click=\"showVideoInfo\">\n                  <img src=\"../../assets/icons/button_close.png\" alt=\"\">\n                </div>\n              </div>\n            </div>\n        </div>\n      </div>\n      <div class=\"pagination\">\n        <div \n        class=\"pagination_item\" \n        v-for=\"i in 3\" \n        :key=\"i\"\n        :class=\"{'selected_item': i === curentSlide + 1}\"\n        @click=\"setCurentSlide(i-1)\" />\n      </div>\n    </div>\n    <div class=\"right_arrow\" @click=\"next\" v-if=\"curentSlide !== 2\">\n      <img src=\"../../assets/icons/right-arrow.svg\" alt=\"\">\n    </div>\n    <div class=\"empty_block\" v-else></div>\n    <div class=\"video_dialog\" v-if=\"showVideoDialog\">\n      <video disablepictureinpicture autoplay playsinline  width=\"1920\" height=\"1080\" :controls=\"showControls\" controlsList=\"nodownload\" id=\"video_dialog\">\n        <source :src=\"require('../../assets/video/' + videoUrl)\" type=\"video/mp4\">\n      </video>\n      <div class=\"button_close_full\" @click=\"videoClose\">\n          <img src=\"../../assets/icons/button_close_full.png\" alt=\"\">\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\n\nexport default {\n  name: 'AppVideoCarousel',\n  components: {},\n  props: {\n    items: {\n      type: Array,\n      require: true,\n      default: () => []\n    },\n  },\n  data(){\n    return {\n      curentSlide: 0,\n      showControls: false,\n      showInfo: false,\n      showInfoBtn: true,\n      showPlayBtn: true,\n      timerId: null,\n      showVideoDialog: false,\n      videoUrl: '',\n      touch: {\n        startX: 0,\n        endX: 0\n      }\n    }\n  },\n  watch:{},\n  created(){},\n  mounted(){\n    this.$el.addEventListener('touchstart', event => this.touchstart(event))\n    this.$el.addEventListener('touchmove', event => this.touchmove(event))\n    this.$el.addEventListener('touchend', () => this.touchend())\n  },\n  computed: {\n  },\n  methods: {\n    setCurentSlide(i){\n      this.curentSlide = i\n    },\n    prev(){\n      const index = this.curentSlide > 0 ? this.curentSlide - 1 : this.items.length - 1\n      this.setCurentSlide(index)\n    },\n    next(){\n      const index = this.curentSlide < this.items.length - 1 ? this.curentSlide + 1 : 0\n      this.setCurentSlide(index)\n    },\n    showVideoInfo() {\n      this.showInfo = !this.showInfo\n      this.showInfoBtn = !this.showInfoBtn\n    },\n    videoPlay() {\n      this.showVideoDialog = true\n      this.videoUrl = this.items[this.curentSlide].url\n\n      setTimeout(() => {\n        const videoEl = document.getElementsByTagName('video')[3]\n\n        const videoDuration = videoEl.duration\n        this.timerId = setInterval(() => {\n          let currentTime = videoEl.currentTime\n          if(currentTime == videoDuration) {\n            this.videoClose()\n            clearInterval(this.timerId)\n            return\n          }\n        }, 10)\n      }, 1000)\n      this.showInfo = false\n      this.showControls = true\n    },\n    videoClose(){\n      const videoEl = document.getElementsByTagName('video')[3]\n      videoEl.pause()\n      this.showVideoDialog = false\n    },\n    touchstart(event){\n      this.touch.startX = event.touches[0].clientX\n      this.touch.endX = 0\n    },\n    touchmove(event){\n      this.touch.endX = event.touches[0].clientX\n    },\n    touchend(){\n      if(!this.touch.endX || Math.abs(this.touch.endX - this.touch.startX) < 20){\n        return\n      }\n      if(this.touch.endX < this.touch.startX) {\n        this.next()\n      } else {\n        this.prev() \n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n.video_wrapper{\n  display: flex;\n  justify-content: center;\n  user-select: none;\n  touch-action: pan-y;\n}\n\n.carousel_wrapper{\n  max-width: 800px;\n  height: 395px;\n  overflow: hidden;\n  margin: 0 auto;\n}\n\n.carousel{\n  display: flex;\n  transition: all ease .5s;\n}\n\n.pagination{\n  display: flex;\n  justify-content: space-between;\n  width: 60px;\n  margin: 12px auto 0;\n}\n\n.pagination_item{\n  width: 10px;\n  height: 10px;\n  border: 1px solid #FFFFFF;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.selected_item{\n  background: #D9D9D9;\n}\n\n.left_arrow{\n  margin-right: 21px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.right_arrow{\n  margin-left: 21px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.hover_info{\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.9);\n  padding: 30px 24px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.button_info{\n  position: absolute;\n  bottom: 10px;\n  margin-left: 13px;\n  margin-bottom: 13px;\n  left: 0;\n  cursor: pointer;\n}\n\n.button_play{\n  position: absolute;\n  top: 37%;\n  left: 45%;\n  cursor: pointer;\n}\n\n.videoplayer{\n  position: relative;\n}\n\n.hover_info_title{\n  font-style: normal;\n  font-weight: 500;\n  font-size: 21px;\n  line-height: 25px;\n  color: #E9E9E9;\n}\n\n.hover_info_subtitle{\n  font-style: italic;\n  font-weight: 500;\n  font-size: 18px;\n  line-height: 22px;\n  color: #E8E8E8;\n}\n\n.empty_block{\n  width: 46px;\n}\n\n.volumeactive{\n  animation-duration: 1s;\n  animation-name: show_volume;\n}\n\n@keyframes show_volume {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n.video_dialog{\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 14 !important;\n}\n\n.button_close_full{\n  position: absolute;\n  top: 0;\n  right: 0;\n  margin-right: 34px;\n  margin-top: 35px;\n  cursor: pointer;\n}\n\nvideo::-webkit-media-controls-fullscreen-button {\n  display: none;\n}\n</style>\n"]}]}