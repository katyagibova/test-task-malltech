{"remainingRequest":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/katagibova/Desktop/Работа/Yeltsin-Project/src/components/AppUnit/AppCarousel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/src/components/AppUnit/AppCarousel.vue","mtime":1679861718344},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/cache-loader/dist/cjs.js","mtime":1676814008015},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/babel-loader/lib/index.js","mtime":1676814008140},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/cache-loader/dist/cjs.js","mtime":1676814008015},{"path":"/Users/katagibova/Desktop/Работа/Yeltsin-Project/node_modules/vue-loader/lib/index.js","mtime":1676814005919}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBcHBDYXJvdXNlbEl0ZW0gZnJvbSAnLi9BcHBDYXJvdXNlbEl0ZW0udnVlJwppbXBvcnQgQXBwTGlnaHRCb3ggZnJvbSAnLi9BcHBMaWdodEJveC52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcENhcm91c2VsJywKICBjb21wb25lbnRzOiB7CiAgICBBcHBDYXJvdXNlbEl0ZW0sCiAgICBBcHBMaWdodEJveCwKICB9LAogIHByb3BzOiB7CiAgICBpdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZTogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICBwaG90b3NMYXJnZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZTogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBjdXJlbnRTbGlkZTogMCwKICAgICAgbGlnaHRCb3hJbmRleDogMCwKICAgICAgaXNPcGVuOiBmYWxzZSwKICAgICAgbnVtczogWzAsIDIsIDQsIDZdLAogICAgICB0b3VjaDogewogICAgICAgIHN0YXJ0WDogMCwKICAgICAgICBlbmRYOiAwCiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOnsKICAgIGlzT3Blbih2YWx1ZSl7CiAgICAgIGlmKHZhbHVlKXsKICAgICAgICBjb25zdCBhbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nhcm91c2VsJykKICAgICAgICBhbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBldmVudCA9PiB0aGlzLnRvdWNoc3RhcnQoZXZlbnQpKQogICAgICAgIGFsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZXZlbnQgPT4gdGhpcy50b3VjaHN0YXJ0KGV2ZW50KSkKICAgICAgICBhbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKCkgPT4gdGhpcy50b3VjaHN0YXJ0KCkpCiAgICAgIH0gCiAgICAgIC8vIGVsc2UgewogICAgICAvLyAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBldmVudCA9PiB0aGlzLnRvdWNoc3RhcnQoZXZlbnQpKQogICAgICAvLyAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGV2ZW50ID0+IHRoaXMudG91Y2htb3ZlKGV2ZW50KSkKICAgICAgLy8gICB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHRoaXMudG91Y2hlbmQoKSkKICAgICAgLy8gfQogICAgfQogIH0sCiAgY3JlYXRlZCgpewogIH0sCiAgbW91bnRlZCgpewogICAgY29uc3QgYWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJvdXNlbCcpCiAgICBhbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBldmVudCA9PiB0aGlzLnRvdWNoc3RhcnQoZXZlbnQpKQogICAgYWxlbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBldmVudCA9PiB0aGlzLnRvdWNobW92ZShldmVudCkpCiAgICBhbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKCkgPT4gdGhpcy50b3VjaGVuZCgpKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNhcm91c2VsUG9zaXRpb24oKXsKICAgICAgcmV0dXJuIHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtJysgdGhpcy5jdXJlbnRTbGlkZSAqIDUwICsnJSknfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0Q3VyZW50U2xpZGUoaSl7CiAgICAgIHRoaXMuY3VyZW50U2xpZGUgPSBpCiAgICB9LAogICAgcHJldigpewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VyZW50U2xpZGUgPiAwID8gdGhpcy5jdXJlbnRTbGlkZSAtIDIgOiB0aGlzLml0ZW1zLmxlbmd0aCAtIDIKICAgICAgdGhpcy5zZXRDdXJlbnRTbGlkZShpbmRleCkKICAgIH0sCiAgICBuZXh0KCl7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXJlbnRTbGlkZSA8IHRoaXMuaXRlbXMubGVuZ3RoIC0gMiA/IHRoaXMuY3VyZW50U2xpZGUgKyAyIDogMAogICAgICB0aGlzLnNldEN1cmVudFNsaWRlKGluZGV4KQogICAgfSwKICAgIHNob3dQaG90byhkYXRhKXsKICAgICAgdGhpcy5saWdodEJveEluZGV4ID0gZGF0YS5pbmRleAogICAgICB0aGlzLmlzT3BlbiA9IHRydWUKICAgIH0sCiAgICB0b3VjaHN0YXJ0KGV2ZW50KXsKICAgICAgdGhpcy50b3VjaC5zdGFydFggPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFgKICAgICAgdGhpcy50b3VjaC5lbmRYID0gMAogICAgfSwKICAgIHRvdWNobW92ZShldmVudCl7CiAgICAgIHRoaXMudG91Y2guZW5kWCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WAogICAgfSwKICAgIHRvdWNoZW5kKCl7CiAgICAgIGlmKCF0aGlzLnRvdWNoLmVuZFggfHwgTWF0aC5hYnModGhpcy50b3VjaC5lbmRYIC0gdGhpcy50b3VjaC5zdGFydFgpIDwgMjApewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmKHRoaXMudG91Y2guZW5kWCA8IHRoaXMudG91Y2guc3RhcnRYKSB7CiAgICAgICAgdGhpcy5uZXh0KCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByZXYoKSAKICAgICAgfQogICAgfSwKICB9Cn0K"},{"version":3,"sources":["AppCarousel.vue"],"names":[],"mappings":";AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppCarousel.vue","sourceRoot":"src/components/AppUnit","sourcesContent":["<template>\n<div class=\"photo_wrapper\">\n    <div class=\"left_arrow\" @click=\"prev\" v-if=\"curentSlide !== 0\">\n      <img src=\"../../assets/icons/left-arrow.svg\" alt=\"\">\n    </div>\n    <div class=\"empty_block\" v-else></div>\n    <div style=\"user-select: none; touch-action: pan-y;\">\n      <div class=\"carousel_wrapper\">\n        <div class=\"carousel\" :style=\"carouselPosition\" id=\"carousel\">\n          <app-carousel-item\n          v-for=\"(item, i) in items\"\n          :key=\"i\"\n          :item=\"item\"\n          @showPhoto=\"showPhoto\"\n          />\n        </div>\n      </div>\n      <div class=\"pagination\">\n        <div \n        class=\"pagination_item\" \n        v-for=\"i in nums\" \n        :key=\"i\"\n        :class=\"{'selected_item': i === curentSlide}\"\n        @click=\"setCurentSlide(i)\" />\n      </div>\n    </div>\n    <div class=\"right_arrow\" @click=\"next\" v-if=\"curentSlide !== 6\">\n      <img src=\"../../assets/icons/right-arrow.svg\" alt=\"\">\n    </div>\n    <div class=\"empty_block\" v-else></div>\n    <app-light-box v-model=\"isOpen\" :media=\"photosLarge\" :lightBoxIndex.sync=\"lightBoxIndex\"  />\n</div>\n</template>\n\n<script>\nimport AppCarouselItem from './AppCarouselItem.vue'\nimport AppLightBox from './AppLightBox.vue'\n\nexport default {\n  name: 'AppCarousel',\n  components: {\n    AppCarouselItem,\n    AppLightBox,\n  },\n  props: {\n    items: {\n      type: Array,\n      require: true,\n      default: () => []\n    },\n    photosLarge: {\n      type: Array,\n      require: true,\n      default: () => []\n    },\n  },\n  data(){\n    return {\n      curentSlide: 0,\n      lightBoxIndex: 0,\n      isOpen: false,\n      nums: [0, 2, 4, 6],\n      touch: {\n        startX: 0,\n        endX: 0\n      }\n    }\n  },\n  watch:{\n    isOpen(value){\n      if(value){\n        const alem = document.getElementById('carousel')\n        alem.removeEventListener('touchstart', event => this.touchstart(event))\n        alem.removeEventListener('touchmove', event => this.touchstart(event))\n        alem.removeEventListener('touchend', () => this.touchstart())\n      } \n      // else {\n      //   this.$el.addEventListener('touchstart', event => this.touchstart(event))\n      //   this.$el.addEventListener('touchmove', event => this.touchmove(event))\n      //   this.$el.addEventListener('touchend', () => this.touchend())\n      // }\n    }\n  },\n  created(){\n  },\n  mounted(){\n    const alem = document.getElementById('carousel')\n    alem.addEventListener('touchstart', event => this.touchstart(event))\n    alem.addEventListener('touchmove', event => this.touchmove(event))\n    alem.addEventListener('touchend', () => this.touchend())\n  },\n  computed: {\n    carouselPosition(){\n      return { transform: 'translateX(-'+ this.curentSlide * 50 +'%)'}\n    }\n  },\n  methods: {\n    setCurentSlide(i){\n      this.curentSlide = i\n    },\n    prev(){\n      const index = this.curentSlide > 0 ? this.curentSlide - 2 : this.items.length - 2\n      this.setCurentSlide(index)\n    },\n    next(){\n      const index = this.curentSlide < this.items.length - 2 ? this.curentSlide + 2 : 0\n      this.setCurentSlide(index)\n    },\n    showPhoto(data){\n      this.lightBoxIndex = data.index\n      this.isOpen = true\n    },\n    touchstart(event){\n      this.touch.startX = event.touches[0].clientX\n      this.touch.endX = 0\n    },\n    touchmove(event){\n      this.touch.endX = event.touches[0].clientX\n    },\n    touchend(){\n      if(!this.touch.endX || Math.abs(this.touch.endX - this.touch.startX) < 20){\n        return\n      }\n      if(this.touch.endX < this.touch.startX) {\n        this.next()\n      } else {\n        this.prev() \n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n.photo_wrapper{\n  display: flex;\n  justify-content: center;\n  user-select: none;\n  touch-action: pan-y;\n}\n\n.carousel_wrapper{\n  max-width: 790px;\n  height: 395px;\n  overflow: hidden;\n  margin: 0 auto;\n}\n\n.carousel{\n  display: flex;\n  transition: all ease .5s;\n}\n\n.carousel img {\n  pointer-events: none;\n}\n\n.left_arrow{\n  margin-right: 21px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.right_arrow{\n  margin-left: 21px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.empty_block{\n  width: 46px;\n}\n\n.pagination{\n  display: flex;\n  justify-content: space-between;\n  width: 84px;\n  margin: 12px auto 0;\n}\n\n.pagination_item{\n  width: 10px;\n  height: 10px;\n  border: 1px solid #FFFFFF;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.selected_item{\n  background: #D9D9D9;\n}\n</style>\n"]}]}