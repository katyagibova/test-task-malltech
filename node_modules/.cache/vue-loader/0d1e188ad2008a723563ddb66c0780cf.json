{"remainingRequest":"/Users/katagibova/Desktop/gibova-test-task/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/katagibova/Desktop/gibova-test-task/src/views/MainScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/katagibova/Desktop/gibova-test-task/src/views/MainScreen.vue","mtime":1685050368874},{"path":"/Users/katagibova/Desktop/gibova-test-task/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/katagibova/Desktop/gibova-test-task/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/katagibova/Desktop/gibova-test-task/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/katagibova/Desktop/gibova-test-task/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGFwaSB9IGZyb20gIkAvc2VydmljZSIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFpblNjcmVlbicsCiAgY29tcG9uZW50czogewogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgcGVvcGxlOiBbXSwKICAgICAgcGFnaW5hdGlvbkxlbmd0aDogMCwKICAgICAgcGFnZTogMSwKICAgICAgY3JlYXRpb25EaWFsb2c6IGZhbHNlLAogICAgICBlZGl0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgbmV3TmFtZTogJycsCiAgICAgIG5ld1N1cm5hbWU6ICcnLAogICAgICBuZXdCaXJ0aERhdGU6ICcnLAogICAgICBzZWxlY3RlZEl0ZW06IHt9LAogICAgICBzbmFja2JhcjogZmFsc2UsCiAgICAgIHNuYWNrYmFyVGV4dDogJycsCiAgICAgIHNuYWNrYmFyQ29sb3I6ICcnLAogICAgICB2YWxpZENyZWF0aW9uRm9ybTogZmFsc2UsCiAgICAgIHZhbGlkRWRpdGlvbkZvcm06IGZhbHNlLAogICAgICBzdXJuYW1lUnVsZXM6IFsKICAgICAgICB2ID0+ICEhdiB8fCAn0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1JwogICAgICBdLAogICAgICBiaXJ0aERhdGVSdWxlczogWwogICAgICAgIHYgPT4gISF2IHx8ICfQntCx0Y/Qt9Cw0YLQtdC70YzQvdC+0LUg0L/QvtC70LUnLAogICAgICAgIHYgPT4gL1swLTNdWzAtOV1cLlswMV1bMC05XVwuWzEyXVswLTldWzAtOV1bMC05XS8udGVzdCh2KSB8fCAn0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIg0LTQsNGC0YsnLAogICAgICBdLAogICAgfQogIH0sCiAgd2F0Y2g6IHt9LAogIG1vdW50ZWQoKSB7fSwKICBjcmVhdGVkKCl7CiAgICB0aGlzLmdldEl0ZW1zKCkKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYWdpbmF0ZWREYXRhKCl7CiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5wYWdlICogMyAtIDMsCiAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgMwogICAgICByZXR1cm4gdGhpcy5wZW9wbGUuc2xpY2Uoc3RhcnQsIGVuZCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEl0ZW1zKCl7CiAgICAgIGFwaS5nZXRBbGxQZW9wbGUoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMucGVvcGxlID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMucGFnaW5hdGlvbkxlbmd0aCA9IE1hdGguY2VpbChyZXNwb25zZS5kYXRhLmxlbmd0aCAvIDMpIAogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICB9KQogICAgfSwKICAgIGNyZWF0ZUl0ZW0oKSB7CiAgICAgIGlmKHRoaXMudmFsaWRDcmVhdGlvbkZvcm0pIHsKICAgICAgICBjb25zdCBuZXdJdGVtID0gewogICAgICAgICAgbmFtZTogdGhpcy5uZXdOYW1lLAogICAgICAgICAgc3VybmFtZTogdGhpcy5uZXdTdXJuYW1lLAogICAgICAgICAgYmlydGhEYXRlOiB0aGlzLm5ld0JpcnRoRGF0ZQogICAgICAgIH0KCiAgICAgICAgYXBpLmNyZWF0ZU5ld0l0ZW0obmV3SXRlbSkKICAgICAgICAgIC50aGVuKCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9CX0LDQv9C40YHRjCDRgdC+0LfQtNCw0L3QsCDRg9GB0L/QtdGI0L3QvicKICAgICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ2dyZWVuIGRhcmtlbi0xJwogICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZQogICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCkKICAgICAgICAgICAgdGhpcy5nZXRJdGVtcygpCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zbmFja2JhclRleHQgPSAn0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCcKICAgICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ3JlZCBkYXJrZW4tMScKICAgICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWUKICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpCiAgICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuY3JlYXRpb25Gb3JtLnZhbGlkYXRlKCkKICAgICAgfQogICAgfSwKICAgIGVkaXRJdGVtKCkgewogICAgICBpZih0aGlzLnZhbGlkRWRpdGlvbkZvcm0pewogICAgICAgIGFwaS5lZGl0SXRlbSh0aGlzLnNlbGVjdGVkSXRlbSkKICAgICAgICAgIC50aGVuKCAoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9CX0LDQv9C40YHRjCDQuNC30LzQtdC90LXQvdCwINGD0YHQv9C10YjQvdC+JwogICAgICAgICAgICB0aGlzLnNuYWNrYmFyQ29sb3IgPSAnZ3JlZW4gZGFya2VuLTEnCiAgICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZWRpdGlvbkRpYWxvZyA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuZ2V0SXRlbXMoKQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnCiAgICAgICAgICAgIHRoaXMuc25hY2tiYXJDb2xvciA9ICdyZWQgZGFya2VuLTEnCiAgICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZWRpdGlvbkRpYWxvZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuZWRpcmlvbkZvcm0udmFsaWRhdGUoKQogICAgICB9CiAgICB9LAogICAgZGVsZXRlSXRlbShpZCkgewogICAgICBhcGkuZGVsZXRlSXRlbShpZCkKICAgICAgICAudGhlbiggKCkgPT4gewogICAgICAgICAgdGhpcy5zbmFja2JhclRleHQgPSAn0JfQsNC/0LjRgdGMINGD0LTQsNC70LXQvdCwINGD0YHQv9C10YjQvdC+JwogICAgICAgICAgdGhpcy5zbmFja2JhckNvbG9yID0gJ2dyZWVuIGRhcmtlbi0xJwogICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWUKICAgICAgICAgIHRoaXMuZ2V0SXRlbXMoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuc25hY2tiYXJUZXh0ID0gJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnCiAgICAgICAgICB0aGlzLnNuYWNrYmFyQ29sb3IgPSAncmVkIGRhcmtlbi0xJwogICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWUKICAgICAgICB9KQogICAgfSwKICAgIG9wZW5FZGl0RGlhbG9nKGlkKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gey4uLnRoaXMucGVvcGxlLmZpbmQoZWwgPT4gZWwuaWQgPT09IGlkKX0KICAgICAgdGhpcy5lZGl0aW9uRGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIGNsb3NlRGlhbG9nKCl7CiAgICAgIHRoaXMubmV3TmFtZSA9ICcnCiAgICAgIHRoaXMubmV3U3VybmFtZSA9ICcnCiAgICAgIHRoaXMubmV3QmlydGhEYXRlID0gJycKICAgICAgdGhpcy5jcmVhdGlvbkRpYWxvZyA9IGZhbHNlCiAgICB9LAogICAgc3VibWl0SGFuZGxlcigpIHsKCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["MainScreen.vue"],"names":[],"mappings":";AA0LA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"MainScreen.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col cols=\"2\">\n        <v-btn \n        color=\"primary\" \n        elevation=\"0\"\n        @click=\"creationDialog = true\">\n          Создать\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-simple-table>\n          <template v-slot:default>\n          <thead>\n            <tr>\n              <th class=\"text-center\">\n                Имя\n              </th>\n              <th class=\"text-center\">\n                Фамилия\n              </th>\n              <th class=\"text-center\">\n                Дата рождения\n              </th>\n              <th class=\"text-center\">\n                Действия\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n            v-for=\"item in paginatedData\"\n            :key=\"item.id\"\n            >\n            <td class=\"text-center\">{{ item.name }}</td>\n            <td class=\"text-center\">{{ item.surname }}</td>\n            <td class=\"text-center\">{{ item.birthDate }}</td>\n            <td class=\"text-center\">\n              <v-btn icon @click=\"openEditDialog(item.id)\">\n                <v-icon> mdi-pencil </v-icon>\n              </v-btn>\n              <v-btn icon color=\"red\" @click=\"deleteItem(item.id)\">\n                <v-icon> mdi-delete </v-icon>\n              </v-btn>\n            </td>\n            </tr>\n          </tbody>\n          </template>\n        </v-simple-table>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-spacer></v-spacer>\n      <v-col>\n        <v-pagination\n          v-model=\"page\"\n          :length=\"paginationLength\"\n          circle\n        ></v-pagination>\n      </v-col>\n      <v-spacer></v-spacer>\n    </v-row>\n    <v-dialog\n    v-model=\"creationDialog\"\n    max-width=\"600\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          Добавить запись\n        </v-card-title>\n\n        <v-form v-model=\"validCreationForm\" ref=\"creationForm\">\n          <v-card-text>\n            <v-text-field\n            v-model=\"newName\"\n            label=\"Имя\"\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"newSurname\"\n            label=\"Фамилия\"\n            :rules=\"surnameRules\"\n            required\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"newBirthDate\"\n            label=\"Дата рождения\"\n            :rules=\"birthDateRules\"\n            required\n            ></v-text-field>\n          </v-card-text>\n\n          <v-card-actions>\n            <v-btn\n              color=\"red darken-1\"\n              text\n              @click=\"closeDialog\"\n            >\n              Отмена\n            </v-btn>\n\n            <v-spacer></v-spacer>\n\n            <v-btn\n              color=\"green darken-1\"\n              text\n              @click=\"createItem\"\n            >\n              Добавить\n            </v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog\n    v-model=\"editionDialog\"\n    max-width=\"600\"\n    >\n      <v-card>\n        <v-card-title class=\"text-h5\">\n          Изменить запись\n        </v-card-title>\n\n        <v-form v-model=\"validEditionForm\" ref=\"edirionForm\">\n          <v-card-text>\n            <v-text-field\n            v-model=\"selectedItem.name\"\n            label=\"Имя\"\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"selectedItem.surname\"\n            label=\"Фамилия\"\n            :rules=\"surnameRules\"\n            required\n            ></v-text-field>\n\n            <v-text-field\n            v-model=\"selectedItem.birthDate\"\n            label=\"Дата рождения\"\n            :rules=\"birthDateRules\"\n            required\n            ></v-text-field>\n          </v-card-text>\n\n          <v-card-actions>\n            <v-btn\n              color=\"red darken-1\"\n              text\n              @click=\"editionDialog = false\"\n            >\n              Отмена\n            </v-btn>\n\n            <v-spacer></v-spacer>\n\n            <v-btn\n              color=\"green darken-1\"\n              text\n              @click=\"editItem\"\n            >\n              Сохранить\n            </v-btn>\n          </v-card-actions>\n        </v-form>\n      </v-card>\n    </v-dialog>\n    \n    <v-snackbar\n    v-model=\"snackbar\"\n    :timeout=\"2000\"\n    :color=\"snackbarColor\"\n    top\n    right\n    >\n      {{ snackbarText }}\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { api } from \"@/service\"\n\nexport default {\n  name: 'MainScreen',\n  components: {\n  },\n  data(){\n    return {\n      people: [],\n      paginationLength: 0,\n      page: 1,\n      creationDialog: false,\n      editionDialog: false,\n      newName: '',\n      newSurname: '',\n      newBirthDate: '',\n      selectedItem: {},\n      snackbar: false,\n      snackbarText: '',\n      snackbarColor: '',\n      validCreationForm: false,\n      validEditionForm: false,\n      surnameRules: [\n        v => !!v || 'Обязательное поле'\n      ],\n      birthDateRules: [\n        v => !!v || 'Обязательное поле',\n        v => /[0-3][0-9]\\.[01][0-9]\\.[12][0-9][0-9][0-9]/.test(v) || 'Неверный формат даты',\n      ],\n    }\n  },\n  watch: {},\n  mounted() {},\n  created(){\n    this.getItems()\n  },\n  computed: {\n    paginatedData(){\n      const start = this.page * 3 - 3,\n            end = start + 3\n      return this.people.slice(start, end)\n    }\n  },\n  methods: {\n    getItems(){\n      api.getAllPeople().then((response) => {\n        this.people = response.data\n        this.paginationLength = Math.ceil(response.data.length / 3) \n        console.log(response)\n      })\n    },\n    createItem() {\n      if(this.validCreationForm) {\n        const newItem = {\n          name: this.newName,\n          surname: this.newSurname,\n          birthDate: this.newBirthDate\n        }\n\n        api.createNewItem(newItem)\n          .then( () => {\n            this.snackbarText = 'Запись создана успешно'\n            this.snackbarColor = 'green darken-1'\n            this.snackbar = true\n            this.closeDialog()\n            this.getItems()\n          })\n          .catch(() => {\n            this.snackbarText = 'Произошла ошибка'\n            this.snackbarColor = 'red darken-1'\n            this.snackbar = true\n            this.closeDialog()\n          })\n      } else {\n        this.$refs.creationForm.validate()\n      }\n    },\n    editItem() {\n      if(this.validEditionForm){\n        api.editItem(this.selectedItem)\n          .then( () => {\n            this.snackbarText = 'Запись изменена успешно'\n            this.snackbarColor = 'green darken-1'\n            this.snackbar = true\n            this.editionDialog = false\n            this.getItems()\n          })\n          .catch(() => {\n            this.snackbarText = 'Произошла ошибка'\n            this.snackbarColor = 'red darken-1'\n            this.snackbar = true\n            this.editionDialog = false\n          })\n      } else {\n        this.$refs.edirionForm.validate()\n      }\n    },\n    deleteItem(id) {\n      api.deleteItem(id)\n        .then( () => {\n          this.snackbarText = 'Запись удалена успешно'\n          this.snackbarColor = 'green darken-1'\n          this.snackbar = true\n          this.getItems()\n        })\n        .catch(() => {\n          this.snackbarText = 'Произошла ошибка'\n          this.snackbarColor = 'red darken-1'\n          this.snackbar = true\n        })\n    },\n    openEditDialog(id) {\n      this.selectedItem = {...this.people.find(el => el.id === id)}\n      this.editionDialog = true\n    },\n    closeDialog(){\n      this.newName = ''\n      this.newSurname = ''\n      this.newBirthDate = ''\n      this.creationDialog = false\n    },\n    submitHandler() {\n\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n"]}]}